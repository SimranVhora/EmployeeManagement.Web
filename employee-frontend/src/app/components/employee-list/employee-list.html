<div class="container mt-4 employee-list">

  <h3 class="mb-4">Employee List</h3>
<!-- TOP ACTION BUTTONS -->
<div class="d-flex justify-content-end mb-3 gap-2">

  <!-- Add Employee -->
  <button class="btn btn-success"
          (click)="goToAddEmployee()">
    âž• Add Employee
  </button>

  <!-- Project Summary -->
  <button class="btn btn-primary"
          (click)="goToProjectSummary()">
    ðŸ“Š Project Summary
  </button>

</div>

  <!-- FILTER CONTROLS -->
  <div class="card shadow-sm p-3 mb-4">
    <div class="row g-3 align-items-end">

      <!-- Department Filter -->
      <div class="col-md-3">
        <label class="form-label fw-semibold">Department</label>
        <select class="form-select"
                (change)="onDepartmentChange($any($event.target).value ? +$any($event.target).value : null)">
          <option value="">All</option>
          <option *ngFor="let d of departments" [value]="d.departmentID">
            {{ d.departmentName }}
          </option>
        </select>
      </div>

      <!-- Search -->
      <div class="col-md-4">
        <label class="form-label fw-semibold">Search</label>
        <div class="input-group">
          <input type="text"
                 class="form-control"
                 placeholder="Search name or email"
                 [(ngModel)]="searchText" />
          <button class="btn btn-primary" (click)="onSearch()">Search</button>
          <button class="btn btn-secondary" (click)="clearFilters()">Clear</button>
        </div>
      </div>

      <!-- Page Size -->
      <div class="col-md-2">
        <label class="form-label fw-semibold">Page Size</label>
        <select class="form-select" (change)="changePageSize(+$any($event.target).value)">
          <option [value]="5">5</option>
          <option [value]="10" selected>10</option>
          <option [value]="25">25</option>
        </select>
      </div>

    </div>
  </div>

  <!-- EMPLOYEE TABLE -->
  <div class="table-responsive shadow-sm">
    <table class="table table-bordered table-hover align-middle">

      <thead class="table-dark">
        <tr>
          <th (click)="sortBy('firstName')" style="cursor:pointer">Name</th>
          <th (click)="sortBy('email')" style="cursor:pointer">Email</th>
          <th (click)="sortBy('departmentID')" style="cursor:pointer">Department</th>
          <th (click)="sortBy('salary')" style="cursor:pointer">Salary</th>
          <th (click)="sortBy('dateOfJoining')" style="cursor:pointer">Joining Date</th>
          <th>Active</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let e of employees">
          <td>{{ e.firstName }} {{ e.lastName }}</td>
          <td>{{ e.email }}</td>
          <td>{{ getDepartmentName(e.departmentID) }}</td>
          <td>{{ e.salary | currency:'INR' }}</td>
          <td>{{ e.dateOfJoining | date:'yyyy-MM-dd' }}</td>
          <td>
            <span class="badge" [class.bg-success]="e.isActive" [class.bg-danger]="!e.isActive">
              {{ e.isActive ? 'Active' : 'Inactive' }}
            </span>
          </td>
        </tr>
      </tbody>

    </table>
  </div>

  <!-- PAGINATION -->
  <div class="d-flex justify-content-center mt-3 gap-3">

    <button class="btn btn-outline-primary"
            (click)="changePage(($any(filter).page ?? 1) - 1)"
            [disabled]="($any(filter).page ?? 1) <= 1">
      â€¹ Prev
    </button>

    <span class="align-self-center fw-semibold">
      Page {{ $any(filter).page ?? 1 }}
    </span>

    <button class="btn btn-outline-primary"
            (click)="changePage(($any(filter).page ?? 1) + 1)"
            [disabled]="employees.length < ($any(filter).pageSize ?? 0)">
      Next â€º
    </button>

  </div>

</div>
